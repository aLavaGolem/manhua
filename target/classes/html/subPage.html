<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <!-- import CSS -->
  <link href="https://cdn.bootcdn.net/ajax/libs/element-ui/2.13.2/theme-chalk/index.css" rel="stylesheet">
  <style>
    .el-row {
      margin-bottom: 20px;
      &:last-child {
        margin-bottom: 0;
      }
    }
    .el-col {
      border-radius: 4px;
    }
    .bg-purple-dark {
      background: #99a9bf;
    }
    .bg-purple {
      background: #d3dce6;
    }
    .bg-purple-light {
      background: #e5e9f2;
    }
    .grid-content {
      border-radius: 4px;
      min-height: 36px;
    }
    .row-bg {
      padding: 10px 0;
      background-color: #f9fafc;
    }
    li {
        float: left;
        list-style: none;
        width: 150px;
    }
    ul {
        padding-left: 0px;
        width: 60%;
    }
  </style>
</head>
<body>
  <div id="app" hidden>
    <el-row :gutter="20">
        <el-col :span="6"><div class="grid-content bg-purple"></div></el-col>
        <el-col :span="12">
            <h2>Animation</h2>
            <h3>{{ title }}</h3>
            <div v-for ="obj in list" :key="obj.name">
              <h4>{{obj.name}}</h4>
              <ul>
                  <li v-for="li in obj.ul"><el-link type="primary" :href="li.href" >{{ li.name }}</el-link></li>
              </ul>
              <div style="clear:both"></div> 
            </div>
        </el-col>
        <el-col :span="6"><div class="grid-content bg-purple"></div></el-col>
      </el-row>
  </div>
</body>
  <!-- import Vue before Element -->
  <script src="https://cdn.bootcdn.net/ajax/libs/vue/2.6.11/vue.js"></script>
  <!-- import JavaScript -->
  <script src="https://cdn.bootcdn.net/ajax/libs/element-ui/2.13.2/index.js"></script>
  <script src="https://cdn.bootcdn.net/ajax/libs/axios/0.19.2/axios.min.js"></script>
  <script>
    var app =new Vue({
      el: '#app',
      data: function() {
        return { 
          visible: false,
          title:"",
          // list:[{"name":"周刊杂志每周每月连载单集","ul":[{"name":"昨日之歌 081集","href":"./browsePage.html?周刊杂志每周每月连载单集/昨日之歌 081集"},{"name":"昨日之歌 082集","href":"./browsePage.html?周刊杂志每周每月连载单集/昨日之歌 082集"},{"name":"昨日之歌 083集","href":"./browsePage.html?周刊杂志每周每月连载单集/昨日之歌 083集"},{"name":"昨日之歌 084集","href":"./browsePage.html?周刊杂志每周每月连载单集/昨日之歌 084集"},{"name":"昨日之歌 085集","href":"./browsePage.html?周刊杂志每周每月连载单集/昨日之歌 085集"},{"name":"昨日之歌 086集","href":"./browsePage.html?周刊杂志每周每月连载单集/昨日之歌 086集"},{"name":"昨日之歌 087集","href":"./browsePage.html?周刊杂志每周每月连载单集/昨日之歌 087集"},{"name":"昨日之歌 088集","href":"./browsePage.html?周刊杂志每周每月连载单集/昨日之歌 088集"},{"name":"昨日之歌 089集","href":"./browsePage.html?周刊杂志每周每月连载单集/昨日之歌 089集"},{"name":"昨日之歌 090集","href":"./browsePage.html?周刊杂志每周每月连载单集/昨日之歌 090集"},{"name":"昨日之歌 091集","href":"./browsePage.html?周刊杂志每周每月连载单集/昨日之歌 091集"},{"name":"昨日之歌 092集","href":"./browsePage.html?周刊杂志每周每月连载单集/昨日之歌 092集"},{"name":"昨日之歌 093集","href":"./browsePage.html?周刊杂志每周每月连载单集/昨日之歌 093集"},{"name":"昨日之歌 094集","href":"./browsePage.html?周刊杂志每周每月连载单集/昨日之歌 094集"},{"name":"昨日之歌 095集","href":"./browsePage.html?周刊杂志每周每月连载单集/昨日之歌 095集"},{"name":"昨日之歌 096集","href":"./browsePage.html?周刊杂志每周每月连载单集/昨日之歌 096集"},{"name":"昨日之歌 097集","href":"./browsePage.html?周刊杂志每周每月连载单集/昨日之歌 097集"},{"name":"昨日之歌 098集","href":"./browsePage.html?周刊杂志每周每月连载单集/昨日之歌 098集"},{"name":"昨日之歌 099集","href":"./browsePage.html?周刊杂志每周每月连载单集/昨日之歌 099集"},{"name":"昨日之歌 100集","href":"./browsePage.html?周刊杂志每周每月连载单集/昨日之歌 100集"},{"name":"昨日之歌 112集","href":"./browsePage.html?周刊杂志每周每月连载单集/昨日之歌 112集"},{"name":"昨日之歌062集","href":"./browsePage.html?周刊杂志每周每月连载单集/昨日之歌062集"},{"name":"昨日之歌063集","href":"./browsePage.html?周刊杂志每周每月连载单集/昨日之歌063集"},{"name":"昨日之歌064集","href":"./browsePage.html?周刊杂志每周每月连载单集/昨日之歌064集"},{"name":"昨日之歌065集","href":"./browsePage.html?周刊杂志每周每月连载单集/昨日之歌065集"},{"name":"昨日之歌066集","href":"./browsePage.html?周刊杂志每周每月连载单集/昨日之歌066集"},{"name":"昨日之歌067集","href":"./browsePage.html?周刊杂志每周每月连载单集/昨日之歌067集"},{"name":"昨日之歌068集","href":"./browsePage.html?周刊杂志每周每月连载单集/昨日之歌068集"}]},{"name":"漫画出版社发行的单行本","ul":[{"name":"昨日之歌01卷","href":"./browsePage.html?漫画出版社发行的单行本/昨日之歌01卷"},{"name":"昨日之歌02卷","href":"./browsePage.html?漫画出版社发行的单行本/昨日之歌02卷"},{"name":"昨日之歌03卷","href":"./browsePage.html?漫画出版社发行的单行本/昨日之歌03卷"},{"name":"昨日之歌04卷","href":"./browsePage.html?漫画出版社发行的单行本/昨日之歌04卷"},{"name":"昨日之歌05卷","href":"./browsePage.html?漫画出版社发行的单行本/昨日之歌05卷"},{"name":"昨日之歌06卷","href":"./browsePage.html?漫画出版社发行的单行本/昨日之歌06卷"},{"name":"昨日之歌07卷","href":"./browsePage.html?漫画出版社发行的单行本/昨日之歌07卷"},{"name":"昨日之歌08卷","href":"./browsePage.html?漫画出版社发行的单行本/昨日之歌08卷"},{"name":"昨日之歌09卷","href":"./browsePage.html?漫画出版社发行的单行本/昨日之歌09卷"},{"name":"昨日之歌10卷","href":"./browsePage.html?漫画出版社发行的单行本/昨日之歌10卷"},{"name":"昨日之歌11卷","href":"./browsePage.html?漫画出版社发行的单行本/昨日之歌11卷"}]},{"name":"漫画正片外的剧情之番外篇","ul":[{"name":"昨日之歌 动画化纪念特别短篇","href":"./browsePage.html?漫画正片外的剧情之番外篇/昨日之歌 动画化纪念特别短篇"}]}]
          list:[]
        }
      },
      methods: {
        goBack() {
            console.log('go back');
        }
     },
     created: function(){
       var href = location.href;
       var params = href.substring(href.lastIndexOf("?")+1);
       this.title=decodeURI(params);
       
      var url ="http://123.207.245.18:8888/manhua/"+this.title;
      var _this = this;
    
      axios.get(url)
      .then(function (response) {
         if(response.data instanceof Array){
          //  console.log(response.data);
          _this.list=[]
          for(var i=0;i<response.data.length;i++){
            const index=i;
            const name =response.data[i];
            //_this.list[i] ={"name":name}
            axios.get(url+"/"+response.data[i])
            .then(function (response) {
              if(response.data instanceof Array){
                // console.log(response.data);
  
                ul =[];
                for(var j=0;j<response.data.length;j++){
                  var href="./browsePage.html?"+_this.title+"/"+name+"/"+response.data[j];
                  ul[j]={"name":response.data[j],"href":href}
                }
                _this.list.push({"name":name,"ul":ul})
              }
            })
            .catch(function (error) {
                console.log(error);
            })
          }

          // _this.list=[]
          // for(var i=0;i<response.data.length;i++){
          //   //var href="./subPage.html?"+response.data[i];
          //   _this.list[i]={"name":response.data[i],"href":href}
          // }

          console.log("list")
          console.log(_this.list)
          console.log(JSON.stringify(_this.list))
         }
      })
      .catch(function (error) {
          console.log(error);
      })
      
     }
    })
    document.getElementById('app').style.display = 'block';
  </script>
</html>